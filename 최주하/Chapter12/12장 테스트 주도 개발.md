# 12ì¥. í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ

>### TDDì˜ ì„¸ ì‚¬ì´í´
>
>- ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°
>- í…ŒìŠ¤íŠ¸ ì½”ë“œ í†µê³¼ ì‹œí‚¤ê¸° (â†’ í”„ë¡œë•íŠ¸ ì½”ë“œ ì‘ì„± ë‹¨ê³„)
>- ì´ì „ ë‘ ë‹¨ê³„ì—ì„œ ì¶”ê°€ë˜ê±°ë‚˜ ë³€ê²½ëœ ì½”ë“œ ê°œì„ í•˜ê¸°

# ì‹¤ìŠµ

### í…ŒìŠ¤íŠ¸ ì½”ë“œ 1. matchesNothingWhenProfileEmpty()

---

ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ì‹œìŠ¤í…œì— ì¶”ê°€í•˜ê³ ì í•˜ëŠ” **ë™ì‘ì„ ì •ì˜í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ**ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ë‹¤.

12ì¥ì—ì„œëŠ” Profile í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ë³´ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.

```java
public class ProfileTest{
	@Test
	public void matchesNothingWhenProfileEmpty(){
		new Profile();
	}
}
```

ìœ„ì— ìˆëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì‘ì„±ëœ ì‹œì ì—ì„œ Profile í´ë˜ìŠ¤ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

ë”°ë¼ì„œ ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ì‹¤íŒ¨í•  ê²ƒì´ë‹¤.

ê·¸ëŸ¼ ì´ í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì‹œí‚¤ê¸° ìœ„í•´ Profile í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.

```java
public class Profile{
}
```

ì´ì œ í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•œë‹¤. ë‚˜ë¨¸ì§€ë„ ê°™ì€ ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.

```java
    public class ProfileTest{
	
        @DisplayName("Profileì´ ë¹„ì–´ìˆì„ ë•Œ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ”ë‹¤.") 
        @Test 
        public void matchesNothingWhenProfileEmpty(){
            Profile profile = new Profile();
            Question question = new BooleanQuestion(1, "Relocation package?");
            Criterion criterion 
                = new Criterion(new Answer(question, Bool.TRUE), Weight.DontCare);
            
            boolean result = profile.matches(criterion);
            assertFalse(result);
	}
    }
```

ìœ„ì˜ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” profile ê°ì²´ì˜ matches ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê²°ê³¼ê°€ falseì—¬ì•¼ í•œë‹¤.

ê·¸ëŸ¬ë‚˜, TDDì˜ ì‚¬ì´í´ì—ì„œëŠ” ë¨¼ì € ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤.

ë”°ë¼ì„œ í•´ë‹¹ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•  ìˆ˜ ìˆë„ë¡ Profile ê°ì²´ì˜ matches ë©”ì„œë“œì˜ ë°˜í™˜ê°’ì„ falseë¡œ ì‘ì„±í•œë‹¤.

```java
public class Profile{ 
    public boolean matches(Criterion criterion){
        return false;
    }
}
```

TDDì˜ ì ì§„ì  ì‚¬ê³ ë°©ì‹ì„ ë”°ë¥´ê¸° ìœ„í•´ falseë°˜í™˜ì„ í•˜ë“œì½”ë”© í•´ë‘ì—ˆë‹¤.

### í…ŒìŠ¤íŠ¸ ì½”ë“œ 2. matchesWhenProfileContainsMatchingAnswer()

---

ë‹¤ìŒì€ Profileì´ Criterionì— ìˆëŠ” ê²ƒê³¼ ë§¤ì¹­ ë˜ëŠ” Answerë¥¼ í¬í•¨ ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.

```java
@DisplayName("Profileì´ ë§¤ì¹­ë˜ëŠ” ë‹µë³€ì„ í¬í•¨í•˜ê³  ìˆëŠ” ê²½ìš°, ë§¤ì¹­ëœë‹¤.")
@Test
public void matchesWhenProfileContainsMatchingAnswer(){
    Profile profile = new Profile();
    Question question = new BooleanQuestion(1, "Relocation package?");
    Answer answer = new Answer(question, Bool.TRUE);
    profile.add(answer);
    Criterion criterion 
        = new Criterion(answer, Weight.Important);
            
    boolean result = profile.matches(criterion);
    assertTrue(result);
}
```

ì•„ê¹Œì™€ ë‹¤ë¥¸ ë¶€ë¶„ì´ ìˆë‹¤ë©´, Profile ê°ì²´ì— addë¼ëŠ” ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ Answer ê°ì²´ë¥¼ ì´ˆê¸°í™” í•´ì¤€ ê²ƒì´ë‹¤. ì´ ì‹œì ì—ì„œëŠ”  add(Answer)ê°€ ì—†ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•œë‹¤.

í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì‹œí‚¤ê¸° ìœ„í•´ add(Answer)ë¥¼ ì¶”ê°€í•œë‹¤.

```java
public class Profile{
	
    private Answer answer;
    public boolean matches(Criterion criterion){
        return answer = null;
    }
    public void add (Answer answer){
        this.answer = answer;
    }
}
```

### ğŸš©ì¤‘ê°„ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì •ë¦¬: ê³µí†µëœ ì´ˆê¸°í™” ì½”ë“œë¥¼ @Before ë©”ì„œë“œë¡œ!

---

```java
public class ProfileTest{
    
    @DisplayName("Profileì´ ë¹„ì–´ìˆì„ ë•Œ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ”ë‹¤.")
    @Test
    public void matchesNothingWhenProfileEmpty(){
        Profile profile = new Profile();
        Question question = new BooleanQuestion(1, "Relocation package?");
        Criterion criterion 
            = new Criterion(new Answer(question, Bool.TRUE), Weight.DontCare);
									
        boolean result = profile.matches(criterion);
        assertFalse(result);
    }

	
    @DisplayName("Profileì´ ë§¤ì¹­ë˜ëŠ” ë‹µë³€ì„ í¬í•¨í•˜ê³  ìˆëŠ” ê²½ìš°, ë§¤ì¹­ëœë‹¤.")
    @Test
    public void matchesWhenProfileContainsMatchingAnswer(){
        Profile profile = new Profile();
        Question question = new BooleanQuestion(1, "Relocation package?");
        Answer answer = new Answer(question, Bool.TRUE);
        profile.add(answer);
        Criterion criterion 
            = new Criterion(answer, Weight.Important);
									
        boolean result = profile.matches(criterion);
        assertTrue(result);
    }
}
```

í˜„ì¬ê¹Œì§€ ì‘ì„±ëœ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ìœ„ì™€ ê°™ë‹¤. ë‘ ê°œì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ê³µí†µë˜ëŠ” ë¶€ë¶„ì„ **`@Before`** (junit5 ê¸°ì¤€ @BeforeEach)ë©”ì„œë“œë¡œ ì¶”ì¶œí•œë‹¤.

```java
public class ProfileTest{ 
    private Profile profile;
    private BooleanQuestion questionIsThereRelocation;
    private Answer answerThereIsRelocation;
    
    @Before 
    public void createProfile(){
        profile = new Profile();
    }
    @Before 
    public void createQuestionAndAnswer(){
        questionIsThereRelocation = new BooleanQuestion(1, "Relocationpackage?");
        answerThereIsRelocation = new Answer(questionIsThereRelocation, Bool.TRUE);
    }
    
    @Test 
    public void matchesNothingWhenProfileEmpty(){
        Criterion criterion = new Crriterion(answerThereIsRelocation, Weight.DontCare);
        
        boolean result = profile.matches(criterion);
        
        assertFalse(result);
    }
    
    @Test 
    public void matchesWhenProfileContainsMatchingAnswer(){
        profile.add(answerThereIsRelocation);
        Criterion criterion = new Criterion(answerThereIsRelocation, Weight.Important);
        
        boolean result = profile.matches(criterion);
        
        assertTrue(result);
    }
}
```

### í…ŒìŠ¤íŠ¸ ì½”ë“œ3. doesNotMatchWhenNoMatchingAnswer()

---

Profile ì¸ìŠ¤í„´ìŠ¤ê°€ ë§¤ì¹­ë˜ëŠ” Answer ê°ì²´ê°€ ì—†ì„ ë•Œ, matches() ë©”ì„œë“œê°€ falseë¥¼ ë°˜í™˜í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.

```java
public class ProfileTest{
    
    private Answer answerThereIsNotRelocation;
    
    @Before 
    public void createQuestionAndAnswer(){
        questionIsThereRelocation = new BooleanQuestion(1, "Relocationpackage?");
        answerThereIsRelocation = new Answer(questionIsThereRelocation, Bool.TRUE);
        answerThereIsNotRelocation = new Answer(questionIsThereRelocation, Bool.FALSE);
    }
    
    @Test 
    public void doesNotMatchWhenNoMatchingAnswer(){
        profile.add(answerThereIsNotRelocation);
        Criterion criterion = new Criterion(answerThereIsRelocation, Weight.Important);
        
        boolean result = profile.matches(criterion);
        
        assertFalse(result);
    }
}
```

ìœ„ì˜ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ ì‹œí‚¤ê¸° ìœ„í•´ matchesëŠ” profileê°ì²´ê°€ ê°€ì§€ê³  ìˆëŠ” answer ê°ì²´ì™€ criterion ê°ì²´ì— ì €ì¥ë˜ì–´ìˆëŠ” answerê°ì²´ê°€ ë§¤ì¹­ë˜ëŠ”ì§€ ê²°ì •í•´ì•¼ í•œë‹¤.

```java
public class Profile{
    
    private Answer answer;
		
    public boolean matches(Criterion criterion){
        return answer != null 
            && answer.match(criterion.getAnswer()));
    }
    public void add (Answer answer){
        this.answer = answer;
    }
}
```

### í…ŒìŠ¤íŠ¸ ì½”ë“œ 4. matchesWhenContainsMultipleAnswer()

---

ì´ë²ˆì—ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ì—¬ëŸ¬ ê°œì˜ answerë¥¼ ê°€ì§€ëŠ” Profileì„ Criterionì— ì €ì¥ë˜ì–´ ìˆëŠ” ë‹µë³€ê³¼ ë§¤ì¹­ì‹œí‚¤ëŠ” ë™ì‘ì— ëŒ€í•œ ê²ƒì´ë‹¤.

```java
@Test
public void matchesWhenContainsMultipleAnswer(){
    profile.add(answerThereIsRelocation);
    profile.add(answerDoesNotReimburseTuition);
    Criterion criterion = new Criterion(answerThereIsRelocation, Weight.Important);
    
    boolean result = profile.matches(criterion);
    
    assertTrue(result);
}
```

ë‹¤ìˆ˜ì˜ Answerë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ì„œëŠ” ì €ì¥í•˜ê³ , êµ¬ë³„í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ AnswerëŠ” Map ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•œë‹¤.

- Answer

  - key: ì§ˆë¬¸
  - value: Answer ê°ì²´

```java
public class Profile{
    private Map<String, ANswer> answers = new HashMap<>();
		
    private Answer getMatchingProfileAnswer(Criterion criterion){
        return answers.get(criterion.getAnswer().getQuestionText());
    }
		
    public boolean matches(Criterion criterion){
        Answer answer = getMatchingProfileAnswer(criterion);
        return answer != null 
            && answer.match(criterion.getAnswer()));
    }
    public void add (Answer answer){
        answers.put(answer.getQuestionText(),answer);
    }
}
```

# ë§ˆë¬´ë¦¬!<hr>

ì±…ì—ì„œëŠ” matchesWhenCriterionIsDontCare(), scoreIsZeroWhenThereAreNoMatches() í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì‘ì„±í–ˆë‹¤.

- **`matchesWhenCriterionIsDontCare()` :** ì¡°ê±´ì´ ìƒê´€ ì—†ìŒì¸ ê²½ìš°, ë§¤ì¹­ëœë‹¤. (matches ë©”ì„œë“œê°€ true ë°˜í™˜)
- **`scoreIsZeroWhenThereAreNoMatches()` :**  ë§¤ì¹­ ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì ìˆ˜ê°€ 0ì ì´ë‹¤.

í…ŒìŠ¤íŠ¸ ëª…ì€ ì¡°ê±´, ë™ì‘, ê²°ê³¼ë¥¼ ëª…ì‹œí•˜ì—¬ í…ŒìŠ¤íŠ¸ì˜ ì˜ë„ë¥¼ ë“œëŸ¬ë‚˜ê²Œ ì‘ì„±í•œë‹¤. ê·¸ë˜ì„œ í…ŒìŠ¤íŠ¸ëŠ” ë¬¸ì„œì˜ ì—­í• ì„ í•˜ê¸°ë„ í•œë‹¤.